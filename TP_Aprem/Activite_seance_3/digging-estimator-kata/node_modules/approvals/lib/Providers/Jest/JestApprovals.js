"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.verifyAll = exports.printArray = exports.verifyAsJson = exports.verify = void 0;
const StringWriter = require("../../StringWriter");
const approvals = require("../../Approvals");
const Options_1 = require("../../Core/Options");
const JestNamer_1 = require("./JestNamer");
function verify(sut, options) {
    const config = approvals.getConfig();
    options = options || new Options_1.Options();
    const scrubbed = options.scrub(`${sut}`);
    const writer = new StringWriter(config, scrubbed, options.forFile().getFileExtension());
    approvals.verifyWithControl((0, JestNamer_1.getJestNamer)(), writer, null, config);
}
exports.verify = verify;
function verifyAsJson(data, options) {
    const text = JSON.stringify(data, null, "  ");
    options = options || new Options_1.Options();
    options = options.forFile().withFileExtention(".json");
    verify(text, options);
}
exports.verifyAsJson = verifyAsJson;
function printArray(header, list, formatter) {
    let text = "";
    if (header) {
        text = header + "\n\n\n";
    }
    for (let t of list) {
        text += formatter(t) + "\n";
    }
    return text;
}
exports.printArray = printArray;
function verifyAll(header, list, formatter, options) {
    let count = 0;
    function defaultFormatter(t) {
        return `[${count++}] => ${t}`;
    }
    formatter = formatter || defaultFormatter;
    const text = printArray(header, list, formatter);
    verify(text, options);
}
exports.verifyAll = verifyAll;
